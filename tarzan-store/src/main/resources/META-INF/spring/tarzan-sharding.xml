<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:baymax="http://baymax.tongbanjie.com/schema/baymax-3.0"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
	                       http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
	                       http://baymax.tongbanjie.com/schema/baymax-3.0
	                       http://baymax.tongbanjie.com/schema/baymax-3.0.xsd">
    <!-- 开启baymax -->
    <baymax:context />

    <!--  分表配置 -->
    <baymax:table tableName="tz_message_rocketmq" namePatten="tz_message_rocketmq_{000}">
        <baymax:columns>
            <!-- 根据哪个字段分表 -->
            <baymax:column name="id"/>
        </baymax:columns>

        <!-- 取最后一位%分表数 作为表后缀 -->
        <baymax:function class="com.tongbanjie.tarzan.store.sharding.VirtualModFunction256_16"/>

        <!-- 指定 每个数据库上分别有哪些表后缀 -->
        <baymax:nodeMapping class="com.tongbanjie.baymax.router.strategy.SimpleTableNodeMapping">
            <!-- p0 代表是一个数据源，与 multipleDataSource 定义的 identity 对应 -->
            <!-- 这个配置代表的是 p0 数据库存储的表 -->
            <baymax:node>p0:000,016,032,048,064,080,096,112,128,144,160,176,192,208,224,240</baymax:node>

            <!-- 这个配置代表的是 p1 数据库存储的表 -->
            <!--baymax:node>p1:000</baymax:node-->
        </baymax:nodeMapping>
    </baymax:table>

</beans>
